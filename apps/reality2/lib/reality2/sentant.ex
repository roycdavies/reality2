defmodule Reality2.Sentant do
# *******************************************************************************************************************************************
@moduledoc false
# Start the Sentant, which is a Supervisor that manages the Sentant's Automations, Comms and Plugins.

# **Author**
# - Dr. Roy C. Davies
# - [roycdavies.github.io](https://roycdavies.github.io/)
# *******************************************************************************************************************************************

use Supervisor, restart: :transient

  # -----------------------------------------------------------------------------------------------------------------------------------------
  # Supervisor Callbacks
  # -----------------------------------------------------------------------------------------------------------------------------------------
  @doc false
  def start_link({name, id, sentant_map}) do
    Supervisor.start_link(__MODULE__, {name, id, sentant_map}, name: String.to_atom(id))
  end

  @impl true
  def init({name, id, sentant_map}) do
    children = [
      {Reality2.Automations, {name, id, sentant_map}},
      {Reality2.Plugins, {name, id, sentant_map}},
      {Reality2.Sentant.Comms, {name, id, sentant_map}}
    ]

    Supervisor.init(children, strategy: :one_for_one)
  end
  # -----------------------------------------------------------------------------------------------------------------------------------------



  # -----------------------------------------------------------------------------------------------------------------------------------------
  # Public Functions
  # -----------------------------------------------------------------------------------------------------------------------------------------

  # -----------------------------------------------------------------------------------------------------------------------------------------



  # -----------------------------------------------------------------------------------------------------------------------------------------
  # Helper Functions
  # -----------------------------------------------------------------------------------------------------------------------------------------

  # -----------------------------------------------------------------------------------------------------------------------------------------
end
